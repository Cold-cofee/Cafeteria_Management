<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–∫–ª–∞–¥ –∏ –ó–∞—è–≤–∫–∏</title>
    <style>
        body { font-family: sans-serif; margin: 40px; background-color: #f8f9fa; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; margin-bottom: 30px;}
        th, td { border: 1px solid #dee2e6; padding: 12px; text-align: left; vertical-align: middle; }
        th { background-color: #343a40; color: white; }
        .price-input { padding: 6px; width: 100px; border-radius: 4px; border: 1px solid #ccc; }
        .btn-approve { background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
        .btn-del { color: #dc3545; text-decoration: none; font-weight: bold; }
        .nav-link { text-decoration: none; color: #007bff; }
        h3 { color: #333; margin-bottom: 10px;}
    </style>
</head>
<body>
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>üì¶ –°–∫–ª–∞–¥ (–ê–¥–º–∏–Ω)</h2>
            <a href="{{ url_for('wallet_bp.wallet_page') }}" class="nav-link">‚Üê –í –∫–æ—à–µ–ª–µ–∫</a>
        </div>

        {% if requests %}
        <h3 style="color: #d35400;">‚è≥ –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ—Å—Ç–∞–≤–∫—É</h3>
        <table>
            <thead>
                <tr style="background-color: #e67e22;">
                    <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                    <th>–ö–æ–ª-–≤–æ</th>
                    <th>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É (‚ÇΩ)</th>
                    <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                </tr>
            </thead>
            <tbody>
                {% for req in requests %}
                <tr>
                    <td>{{ req.product }}</td>
                    <td>{{ req.amount }} —à—Ç.</td>
                    
                    <td colspan="2">
                        <form action="{{ url_for('wallet_bp.approve_request') }}" method="POST" style="display:flex; gap:10px; align-items:center;">
                            <input type="hidden" name="req_id" value="{{ req.id }}">
                            
                            <input type="number" name="price_for_sell" class="price-input" placeholder="–¶–µ–Ω–∞" required min="1">
                            
                            <button type="submit" class="btn-approve">‚úî –û–¥–æ–±—Ä–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p>–ù–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–µ—Ç.</p>
        {% endif %}

        <hr>

        <h3 style="color: #27ae60;">‚úÖ –¢–æ–≤–∞—Ä—ã –≤ –Ω–∞–ª–∏—á–∏–∏</h3>
        <table>
            <thead>
                <tr>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th>–¶–µ–Ω–∞</th>
                    <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td>{{ item.name }}</td>
                    <td style="font-weight: bold;">{{ item.quantity }} —à—Ç.</td>
                    <td>{{ item.price }} ‚ÇΩ</td>
                    <td>
                        <a href="{{ url_for('wallet_bp.delete_inventory_item', item_id=item.id) }}" 
                           class="btn-del" 
                           onclick="return confirm('–°–ø–∏—Å–∞—Ç—å —Ç–æ–≤–∞—Ä?')">–°–ø–∏—Å–∞—Ç—å</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>