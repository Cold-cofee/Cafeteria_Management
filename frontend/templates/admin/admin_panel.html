<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f7f6; margin: 0; padding: 20px; }
        .container { max-width: 1100px; margin: auto; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 25px; }
        h2, h3 { color: #2c3e50; border-bottom: 2px solid #8e44ad; padding-bottom: 10px; margin-top: 0; }

        /* –°–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-top: 5px solid #8e44ad; }
        .stat-card h4 { margin: 0; color: #7f8c8d; text-transform: uppercase; font-size: 12px; }
        .stat-card h1 { margin: 10px 0 0 0; color: #2c3e50; font-size: 28px; }

        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; color: #666; font-size: 13px; }

        .btn { text-decoration: none; padding: 7px 14px; border-radius: 6px; color: white; font-size: 13px; font-weight: bold; transition: 0.2s; border: none; cursor: pointer; }
        .btn-role { background: #3498db; margin-right: 5px; }
        .btn-approve { background: #27ae60; }
        .btn-reject { background: #e74c3c; }
        .btn-print { background: #34495e; float: right; }

        .badge { background: #efefef; padding: 3px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .back-link { display: inline-block; margin-bottom: 20px; text-decoration: none; color: #8e44ad; font-weight: bold; }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–µ—á–∞—Ç–∏ –æ—Ç—á–µ—Ç–∞ */
        @media print {
            .back-link, .btn, .nav-tabs, form, .no-print { display: none !important; }
            .card { box-shadow: none; border: 1px solid #ccc; }
            body { background: white; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="no-print">
        <a href="/" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞–±–∏–Ω–µ—Ç</a>
        <button onclick="window.print()" class="btn btn-print">üñ®Ô∏è –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç (–ü–µ—á–∞—Ç—å)</button>
    </div>

    <div class="stats-grid">
        <div class="stat-card" style="border-color: #3498db;">
            <h4>–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å (—Å–µ–≥–æ–¥–Ω—è)</h4>
            <h1>üë§ {{ stats.visitors }} —á–µ–ª.</h1>
        </div>
        <div class="stat-card" style="border-color: #27ae60;">
            <h4>–û–ø–ª–∞—Ç—ã (–≤—ã–¥–∞–Ω–æ –±–ª—é–¥)</h4>
            <h1>üí∞ {{ stats.total_orders }} —à—Ç.</h1>
        </div>
        <div class="stat-card" style="border-color: #f1c40f;">
            <h4>–¢–æ–ø –ø—Ä–æ–¥–∞–∂</h4>
            <h1>‚≠ê {{ stats.popular }}</h1>
        </div>
    </div>

    <div class="card">
        <h3>üì¶ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞–∫—É–ø–∫–∏</h3>
        {% if supply_requests %}
        <table>
            <thead>
                <tr>
                    <th>–¢–æ–≤–∞—Ä</th>
                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    <th>–ö–æ–ª-–≤–æ</th>
                    <th>–î–∞—Ç–∞</th>
                    <th class="no-print">–î–µ–π—Å—Ç–≤–∏–µ</th>
                </tr>
            </thead>
            <tbody>
                {% for s in supply_requests %}
                <tr>
                    <td><strong>{{ s.item_name }}</strong></td>
                    <td><span class="badge">{{ s.category }}</span></td>
                    <td>{{ s.quantity }} —à—Ç.</td>
                    <td>{{ s.date.strftime('%d.%m %H:%M') }}</td>
                    <td class="no-print">
                        <a href="/admin/approve_supply/{{ s.id }}/approved" class="btn btn-approve">–û–¥–æ–±—Ä–∏—Ç—å</a>
                        <a href="/admin/approve_supply/{{ s.id }}/rejected" class="btn btn-reject">–û—Ç–∫–∞–∑–∞—Ç—å</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p style="color: #999; margin-top: 15px;">–ù–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞–∫—É–ø–∫–∏ –Ω–µ –ø–æ—Å—Ç—É–ø–∞–ª–æ.</p>
        {% endif %}
    </div>

    <div class="card no-print">
        <h3>üõ°Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∏ —Ä–æ–ª—è–º–∏</h3>
        <table>
            <thead>
                <tr>
                    <th>–õ–æ–≥–∏–Ω</th>
                    <th>–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å</th>
                    <th>–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –Ω–∞:</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr>
                    <td><strong>{{ u.login }}</strong></td>
                    <td><span class="badge">{{ u.role }}</span></td>
                    <td>
                        <a href="/admin/change_role/{{ u.id }}/student" class="btn btn-role" style="background: #bdc3c7;">–£—á–µ–Ω–∏–∫</a>
                        <a href="/admin/change_role/{{ u.id }}/cook" class="btn btn-role">–ü–æ–≤–∞—Ä</a>
                        <a href="/admin/change_role/{{ u.id }}/admin" class="btn btn-role" style="background: #8e44ad;">–ê–¥–º–∏–Ω</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div style="display: none; display: block; margin-top: 50px; border-top: 1px solid #000; padding-top: 10px;" class="only-print">
        <p>–û—Ç—á–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ª–æ–≤–æ–π.</p>
        <p>–î–∞—Ç–∞: {{ stats.today_date }} ____________________ (–ü–æ–¥–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)</p>
    </div>
</div>

<style>
    /* –°–∫—Ä—ã—Ç—å –ø–æ–¥–ø–∏—Å—å –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ */
    @media screen { .only-print { display: none !important; } }
</style>

</body>
</html>